<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.webjjang.board.mapper.BoardReplyMapper">
 	<select id="getTotalRow" resultType="Long">
 		select count(*)
 		from board_reply
 		where no = #{no}
 	</select>
    <!-- getTime 메서드에 대한 SQL 매핑 -->
    <select id="list" resultType="com.webjjang.board.vo.BoardReplyVO">
	    SELECT rnum,rno, no, content, id, writeDate
	    from(	
		    SELECT rownum rnum, rno, no, content, id, writeDate
	    	from(
		        SELECT rno, no, content, id, writeDate
		        from board_reply
		        where no = #{no}
		        order by rno desc
		    )
		) where rnum between ${pageObject.startRow} and ${pageObject.endRow}
    </select>
    
    <insert id="write">
    	insert into board_reply (rno,no,content, id)
    	values (board_reply_seq.nextVal, #{no}, #{content}, #{id})
    </insert>
    
    <update id="update">
    	update board_reply set content = #{content} where rno = #{rno} and id = #{id}
    </update>
    
   	<delete id="delete">
   		delete from board_reply where rno = #{rno} and id = #{id}
   	</delete>
</mapper>